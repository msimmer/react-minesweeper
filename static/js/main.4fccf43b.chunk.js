(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(45),o=a.n(l),s=(a(57),a(1)),i=a(14),c=a(46),u=a(47),m=a(50),f=a(48),d=a(4),v=a(51),g=a(49),b=a.n(g),h=a(7),E=a.n(h),w={READY:0,WIN:1,LOSE:2},p={NONE:0,OPTIONS:1,ABOUT:2},O={EASY:0,MEDIUM:1,HARD:2,BEAST:3},N=(a(128),function(e){return{0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine"}[e]}),k=function(e){var t=String(e.count).split("").map(N);return r.a.createElement("div",{className:"screen"},t.map(function(e,t){return r.a.createElement("div",{key:t,className:"number ".concat(e)},r.a.createElement("div",{className:"top-left"}),r.a.createElement("div",{className:"top"}),r.a.createElement("div",{className:"top-right"}),r.a.createElement("div",{className:"mid"}),r.a.createElement("div",{className:"bottom-left"}),r.a.createElement("div",{className:"bottom"}),r.a.createElement("div",{className:"bottom-right"}))}))},j=function(e){var t=e.flags,a=e.status,n=e.time,l=String(n).padStart(3,"0");return r.a.createElement("header",null,r.a.createElement("div",{className:"flags"},r.a.createElement(k,{count:t})),r.a.createElement("button",{className:"status",onClick:e.handleReset},a===w.READY?"\ud83d\ude03":a===w.WIN?"\ud83d\ude0e":"\ud83d\ude41"),r.a.createElement("div",{className:"timer"},r.a.createElement(k,{count:l})))},S=function(e){return r.a.createElement(r.a.Fragment,null,e.column.show&&e.column.edges>0?e.column.edges:(e.column.show||e.status!==w.READY)&&e.column.bomb?"\ud83d\udca3":e.column.flag?"\u26f3":"")},A=function(e){return r.a.createElement("div",{className:"board"},r.a.createElement(j,{handleReset:e.handleReset,bombs:e.bombs,flags:e.flags,status:e.status,time:e.time}),r.a.createElement("div",{className:"grid"},e.rows.map(function(t,a){return r.a.createElement("div",{key:a,className:"row"},t.map(function(t,n){return r.a.createElement("div",{key:"".concat(a,"-").concat(n),className:"column"},r.a.createElement("button",{onClick:e.handleClick([a,n]),className:E()("button",{show:t.show},{flag:t.flag},{bomb:e.status!==w.READY&&t.bomb},{inactive:e.status!==w.READY})},r.a.createElement(S,{column:t,status:e.status})))}))})))},R=function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1).toLowerCase())},C=function(e){return r.a.createElement("li",null,r.a.createElement("label",{htmlFor:e.value},r.a.createElement("input",{checked:e.level===O[e.value],onChange:e.handleChange,id:e.value,name:"level",type:"radio",value:O[e.value]}),O[e.value]===O.BEAST?"".concat(R(e.value)," Mode"):R(e.value)))},y=function(e){return r.a.createElement("div",{className:"toolbar"},r.a.createElement("button",{className:"button",onClick:e.toggleModal(p.OPTIONS)},"Options"),r.a.createElement("button",{className:"button",onClick:e.toggleModal(p.ABOUT)},"About"),r.a.createElement("a",{target:"_blank",className:"button button-right",title:"Fork on GitHub",href:"https://github.com/msimmer/react-minesweeper/"},r.a.createElement("img",{src:"github.svg",alt:"GitHub Logo"})),r.a.createElement("div",{className:E()("modal",{visible:e.modal===p.OPTIONS}),style:{left:e.left}},r.a.createElement("ul",null,Object.keys(O).map(function(t){var a=t;return r.a.createElement(C,{key:t,value:a,level:e.level,handleChange:e.handleChange})}))),r.a.createElement("div",{className:E()("modal",{visible:e.modal===p.ABOUT}),style:{left:e.left}},"Shift + Click to drop a flag",r.a.createElement("br",null),"Score calculated as 3BV/s",r.a.createElement("br",null),"Maxwell Simmer 2019"))},M=(a(129),function(e,t){var a=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-a))+a}),B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state=Object(i.a)({},t.defaultProps),a.getTime=function(){var e=a.state,t=e.start;if(e.timer){var n=Math.floor((Date.now()-t)/1e3);n>999||a.setState({time:n})}},a.start=function(){return{start:Date.now(),timer:window.setInterval(a.getTime.bind(Object(d.a)(a)),1e3)}},a.stop=function(){var e=a.state.timer;window.clearInterval(e)},a.setRegion=function(e,t,n){var r=Object(s.a)(t,2),l=r[0],o=r[1],i=a.regionBlank(e,[l,o]);if(!i)return i;i.region=n;for(var c,u=[[l+1,o],[l-1,o],[l,o+1],[l,o-1]];c=u.shift();)a.regionBlank(e,c)&&a.setRegion(e,c,n);return a.assign(a.regionEdge,e,[l,o],function(e){return e.region=n}),i},a.getRegions=function(e,t,n){for(var r={},l=0,o=0;o<e.length;o++)for(var s=0;s<e[o].length;s++){a.setRegion(e,[o,s],l)&&(l+=1)}for(var i=function(t){r[t]=e.reduce(function(e,a){return e+a.reduce(function(e,a){return e+(a.region===t?1:0)},0)},0)},c=0;c<l;c++)i(c);return Object.keys(r).length+(t-Object.values(r).reduce(function(e,t){return e+t},0)-n)},a.reset=function(){var e=a.state.level,n=a.state,r=n.bombs,l=n.flags,o=n.size;e===O.EASY?r=l=o=12:e===O.MEDIUM?(r=l=48,o=16):e===O.HARD?(r=l=72,o=16):e===O.BEAST&&(r=l=192,o=20);var s=a.getRows(o,r),c=a.getRegions(s,o,r);a.stop(),a.setState(Object(i.a)({},t.defaultProps,{bombs:r,flags:l,size:o,bbbv:c,rows:s,level:e}))},a.setBombs=function(e,t){var n=M(0,t),r=M(0,t),l=e[n][r];return!0===l.bomb?a.setBombs(e,t):(l.bomb=!0,a.assign(a.exists,e,[n,r],function(e){return e.edges+=1}),e)},a.getRows=function(e,t){for(var n={bomb:!1,edges:0,flag:!1,reveal:!1,region:null,show:!1},r=[],l=0;l<e;l++){for(var o=new Array(e),s=0;s<e;s++)o[s]=Object(i.a)({},n);r.push(o)}for(var c=0;c<t;c++)a.setBombs(r,e);return r},a.die=function(){a.stop(),a.setState({status:w.LOSE,timer:t.defaultProps.timer})},a.win=function(){a.stop(),a.setState({status:w.WIN,timer:t.defaultProps.timer})},a.exists=function(e,t){var a=Object(s.a)(t,2),n=a[0],r=a[1];return e[n]&&e[n][r]?e[n][r]:null},a.hidden=function(e,t){var n=Object(s.a)(t,2),r=n[0],l=n[1];return a.exists(e,[r,l])&&!1===e[r][l].reveal?e[r][l]:null},a.blank=function(e,t){var n=Object(s.a)(t,2),r=n[0],l=n[1];return a.exists(e,[r,l])&&a.hidden(e,[r,l])&&e[r][l].edges<1?e[r][l]:null},a.edge=function(e,t){var n=Object(s.a)(t,2),r=n[0],l=n[1];return a.exists(e,[r,l])&&e[r][l].edges>0?e[r][l]:null},a.regionBlank=function(e,t){var n=Object(s.a)(t,2),r=n[0],l=n[1];return a.exists(e,[r,l])&&null===e[r][l].region&&!1===e[r][l].bomb&&e[r][l].edges<1?e[r][l]:null},a.regionEdge=function(e,t){var n=Object(s.a)(t,2),r=n[0],l=n[1];return a.exists(e,[r,l])&&e[r][l].edges>0&&null===e[r][l].region?e[r][l]:null},a.assign=function(e,t,n,r){for(var l,o=Object(s.a)(n,2),i=o[0],c=o[1],u=[[i+1,c],[i-1,c],[i,c+1],[i,c-1],[i+1,c+1],[i-1,c-1],[i+1,c-1],[i-1,c+1]],m=null;l=u.shift();)(m=e.call(Object(d.a)(a),t,l))&&r.call(Object(d.a)(a),m)},a.reveal=function(e,t){var n=Object(s.a)(t,2),r=n[0],l=n[1],o=e[r][l];o.reveal=!0,o&&!1===o.flag&&(o.show=!0);for(var i,c=[[r+1,l],[r-1,l],[r,l+1],[r,l-1]];i=c.shift();)a.blank(e,i)&&a.reveal(e,i);return a.assign(a.edge,e,[r,l],function(e){e.reveal=!0,e&&!1===e.flag&&(e.show=!0)}),e},a.validate=function(){var e=a.state,t=e.bombs,n=e.rows,r=e.size,l=n.reduce(function(e,t){return e+t.reduce(function(e,t){return e+(t.reveal?1:0)},0)},0);Math.pow(r,2)-t===l&&a.win()},a.handleClick=function(e){return function(t){var n=a.state.status,r=b()(a.state.rows),l=a.state,o=l.start,i=l.timer,c=l.flags,u=Object(s.a)(e,2),m=u[0],f=u[1],d=r[m][f];if(n===w.READY){if(!i){var v=a.start();o=v.start,i=v.timer}if(!(t.shiftKey&&c<1)){if(t.shiftKey&&a.hidden(r,e)){var g=!d.flag;return d.flag=g,c+=g?-1:1,a.setState({flags:c,rows:r,start:o,timer:i})}if(!d.flag){if(d.bomb)return a.die();d.edges>0?(d.reveal=!0,d.show=!0):a.reveal(r,e),a.setState({rows:r,start:o,timer:i},a.validate)}}}}},a.toggleModal=function(e){return function(t){var n=a.state.modal===e?p.NONE:e;a.setState({modal:n,left:t.currentTarget.offsetLeft})}},a.handleChange=function(e){var t=Number(e.currentTarget.value);a.setState({level:t},function(){return a.reset()})},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.reset()}},{key:"render",value:function(){var e=this.state,t=e.modal,a=e.left,n=e.level;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"frame"},r.a.createElement(y,{toggleModal:this.toggleModal,handleChange:this.handleChange,modal:t,left:a,level:n}),r.a.createElement(A,Object.assign({handleClick:this.handleClick,handleReset:this.reset},this.state))))}}]),t}(r.a.Component);B.defaultProps={bbbv:0,bombs:12,flags:12,rows:[],size:12,status:w.READY,start:0,time:0,timer:void 0,modal:p.NONE,left:0,level:O.EASY};var D=B;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,a){e.exports=a(130)},57:function(e,t,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.4fccf43b.chunk.js.map